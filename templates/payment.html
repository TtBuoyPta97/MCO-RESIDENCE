<section class="payment-form">
    <h2>Payment</h2>
    <form action="{{ url_for('payment') }}" method="POST" enctype="multipart/form-data">
        <div class="payment-summary">
            <p><strong>Name:</strong> {{ booking.name }}</p>
            <p><strong>Booking:</strong> {{ booking.booking_option_display }}</p>
            <p><strong>Check-in:</strong> {{ booking.checkin_date }} at {{ booking.checkin_time }}</p>
            {% if booking.booking_option == 'night' %}
                <p><strong>Checkout:</strong> Before 11:00 AM Next Day</p>
            {% else %}
                <p><strong>Checkout Time:</strong> {{ booking.checkout_time }}</p>
            {% endif %}
            <p><strong>Total:</strong> R{{ booking.total_amount }}</p>
        </div>

        <label for="payment_method">Select Payment Method:</label>
        <select name="payment_method" id="payment_method" required>
            <option value="">-- Select Payment Option --</option>
            <option value="online">Pay Online (PayFast)</option>
            <option value="manual">Manual Payment (Bank Transfer)</option>
        </select>

        <div id="manual-payment-fields" style="display: none;">
            <p><strong>Banking Details:</strong><br>
            Amangcikwa Holdings PTY Ltd<br>
            Acc No: 10233031039<br>
            Standard Bank</p>

            <label for="proof">Upload Proof of Payment:</label>
            <input type="file" name="proof" id="proof">
        </div>

        <button type="submit" class="btn">Continue</button>
    </form>
</section>

<script>
    const paymentSelect = document.getElementById('payment_method');
    const manualFields = document.getElementById('manual-payment-fields');

    paymentSelect.addEventListener('change', function() {
        if (this.value === 'manual') {
            manualFields.style.display = 'block';
        } else {
            manualFields.style.display = 'none';
        }
    });
</script>
